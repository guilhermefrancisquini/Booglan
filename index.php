<?php
/**
 * Esses pergaminhos estão no antigo e misterioso idioma Booglan. Após muitos anos de estudo,
 * os linguistas já conhecem algumas características desse idioma.

 * Primeiramente, as letras Booglan são classificadas em dois grupos: as letras r, t, c, d e b
 * são chamadas "letras tipo foo", enquanto que as demais são conhecidas como "letras tipo bar".

 * Os linguistas descobriram que as preposições em Booglan são as palavras de 5 letras que terminam numa letra tipo bar,
 * mas onde não ocorre a letra l. Portanto, é fácil ver que existem 49 preposições no Texto A. E no Texto B, quantas
 * preposições existem?
 */

 $textA = 'hnh fcxm jkd bxwkd gzq wmhxmmjg lvnfj sbbszwrh jvvzgr wjjkbjn bhhfwgn mxdwmx pbfwwvph mfh ncnw zkbx xkwdbdt fngmrcts mzntdhv hsvmlv scgkccbc nhtbksv sjcg gllhcp jqkxw szdwqjn kbvkhct jkn bbrmrr qrf qsxfl dzdfg jccxzzkj rqdrrttj fmmrwn kdrqdp hkvgnn fkf swrbr tjnd qjk rqvnt thh qbhgfjc gbgfsj dxrxrhwv ldssvhhr sskdpzk hsff gtwdzvbd scntx wtf fvvsrw gpwxfgd rtpffmcf bcnfbb gtnmldrf dfztff nxprpq crpmz grlqvpr pzxvb jfcv pwz xwkxr ggvfqgl qqgcx jtpxn qddnj pdkphhrn cftt jbxrl xkqxcwpm xmfb fzphplvn gcksvmk jhxtm mdjwn zpslsgr vjjttfb cbsnch pgjwwdjh crp tmjzvn bqvn jhhfbd hthpzcq ltnpw wtffzw kjhpkc mnmqt mdvvc qjqdpwdh vktglnvt dmkvqc zblsrsqb crrkmcb fvh hqcv rgbpwbf wfv hgq grbrpfk ddjbq lqnnk frzxbzb phd fdrbn hbxlb wvbnq mhq whtpldh djx tzdrgpm csdqcl bgpc kdsgjhp ljbqg pgllk sblhr jzsbq vrwnspc zrhpwck htqlk lll pqjjjx zbkskbt wrbzfkbt fltlw cmhsggfh lqfl vlq zptpt mqg jfjlwtdm jnsdxrq sgt hbgwtpgd vph ptprwvwh znkpjh zrgssm rsxmcdc vgdjr mjnt nxmj vdtdhjgs kjtljzgq jqss kvng brlnh mcn khd kngjl wsn cdwmhs wjtvr ffs lgnxnn vkzthz hzrrx dctzmmg rxpb pprvqcw xngbwczg jshqtfx jzfhknfg jnpmn xsmzvr bbrndmp vrpxqlcv pxwkcpkm ccjsqw kvfrdt smcftxv xtpqq ckkscz sppltgqq nfrqmv khjcxjb bcgc lbw prwnkmgf gnsmbtb sfnc xstx nkwvdzb fbzsls dhxlhcd hsk vckfhfh rslpwdrk kjnv lzngjzkt mrs bhw hwhfgsvg ttwhsrg wndvc rvsgkn wbcvxcdl wtfgn zdgtjp whg svn jrkjljdp mxfkqn kmtdvnx mzb wlfvqb kqspjsq hzqjwkzb rcvnpqnh rnst vdfwm zwzc pxq mgdqqv mqgsl vmrb lxfwv fwgqxl nhnrfdfp jfp bkjtgsv pgwt pfnmqd xzcm qqg xhpsx vtcttzdz lfc bgzkr xdcdrvqb ggbsdvf qxwcb jmtgfc llpzw chhb wbq qtrvrgdh dsctrbf zncvspg jsmqs qkcwv gdskzkkr fpgcrdtt bnbtzlf tsgfclj njhblnrr vnd gdmz xmgv nlsxf sbjmtmrc tzzrlh pbblcm cdwx qxt zgffvvj nbnkdt rtpf hmz mjt nwbtpm kmfhlvfx kdztr lzstlwf ddt zfvq hphw cpx lsbp rhhgjbkp wxfgf rczxz cxwdzlxk tbc tqm zwsqjbp lffhzpgc lqz jnn rvs gqqrbcmh nwrlww vgbl lsgxbwvd mvpsmmpg jnshvb qbjtlptx ntrmhf xmnc zlbhtkq kzc tkzq vfnjlksd wjkmlgbj qwdtfkt zkk lprk wxxpg mbrnl tlbd jrxjjnml mjngwf ljswczsj hbv zndrbns tzcx xmgmpjz gwlc ktvdb bdvdgsdg cjw tlfd jrjrqzs cctvz lkt rwrzrk dbtx mfbhfnzr dswh kdtcgmj mqtf pfsg dtkh cxvnb dsp fzfs hjk gnnrrh lfhrm tmhpj cvqbcpw pklnkt fjjlpbk rzjt lkgf nnnlvnfq zqmkj hqqn tsmv qptblxz vljlqwr wqbknxwc csvf dzt ptrwhm kvnvhrt slvjqxtb drmb wxnthr cpwp lrl grgkkfwq gpvckw tjh xrstlrsx zdkpfl ffktjhqv rdtttss rgzlprq gdfm gphrwt kxrpl gsqtch gvrng ndzs mjmb jzqph xxr xfbqlr nfw zgn sdqbl lqhrffq vzj jrjt wmzqhf tjgsrz zvxt kpzqwk vvpnspkm nkksnrf lwpl jbkgqvpp plqj mnk rpfncgz htlj hkgz rhp hthzrktj cnjrgphz hhvjsgkr jqwmdmp kxp dmddhsk hzlvdfhw zmjzcszn htqgktlf gkpxvzbg xdrbsmwn fcdxdb zpbdfn mlcsfnp xtc lvgprg vmm vzzk mxrr jskknvr qgd hzdnsb sfqh rplndz qnkjnqj dzbjc bmqxxc rvvjppt xfhnnfjc ltslrg vzkhz cbqnrtfb phtrdg smhq vwmprznl hfczm khnnv crkqfgm ngqmbvgw twvk tlqnzds mcxr gbbzhn lqzpkgq trv jrdhrjgn nrkprhx zfwrk sjszpglq hrlphwt lbrvz mdhw zlqxzs slfqkxlc pcc tld lhzdc wjdh psjwr zdglcx bqlwwrn ttjp xqjrz djsn tbl rvvvbs kdllrrl rspfv thlcnb jwdvcghd qwszsw tcn hml mmfltjw tfksgrjx fqsnbvkd qtbmp shwdrhq rlcccs snlwvf csrnm xmd kbw cgsczs nddfdz bzbfsjpd kzfpz fjkc zplqhqj lkcbft pcq tpcccd zvr kwwpjcw vjkf bzrjt spt rcfghng jjtxqqhc zsbr qxqzqtl kvlzvkm rvqsnl zpklqhq lhccqf sqsn lxkvnf gppm pjhbcg mbjkk smwxhlw kvxvjlsw kzkl llwgm nwxfndmr lbbjx pprsz fkc zzk hdhrql xrwgc mltwsr hvdjlm mfsx blnsnhgf khjk hlkqcz fqnbw ksdxh dvqsmjjf ftgr ndtzg nxzwfvxf lqrpffs fcp dbkvc mzz kqq dfqrd qkr spdvqfb hwmdxv fvrltlr bqwcc ljxg vcc bsgfrzb wkr pjsfrw gpgrzsk tvqk zdtqrc cfg mcfbpg nwnpl nzbhbxlf qlpjkhmm mhsbf xpt gckgnvwh tfpr tvldqdl vkddtgd hgz rvfc wbjj hfr fgqv tcv nzhvvnw lftklg gdvnpk vxm dljgjlt npz rgpr xfnjp ccwptf ctx vxr gzfx dxplf bpqjwzq nqkrm dbpvxzj bsthm cjwdc qflzwj mxnr xbzj pspb kcwr trf csw frqfs mmkrjpcz rvtfn ztcbglxj bnpbjz spmcmpls bdlr fwscncn wksx tnxn hpmwbs ftcxbv whqn';
 $textB = 'pxxph zxsndg zbgpm ncgsq dmrk ttcv trrzq qdkxddbk jxw bmp gqjcl fnk tlfcmw klfqccx jptn gmt cgksrct dxrlfcc xdkkg vqxtz mpgk jfhphpd hphrqqd vmbdrcp lfftwmw gnspkh ggw xxhjgs pjhf nndbv fgcltmlv wbnl fzrr svhpjc lgqpdw pvkz jgvjhhps vvxtd nbjp vcrqb dwkfp vxx jdvsnnw wgbj crscbznr zvrlj blzfq vrsg kzpdffgb lwkxjmtf xjlvqmvt ldx zkc mhgh pvzkmj kvfn dqcfq scbndf lsgdgj qtgb xwppdz lvcrbms mlnsj chbnltpr nmvs jcdmckbb mwrjw zgz cgk kxkczmd rkmhph nlcmcp rcnv zzcm qnmdxgmx rsh zftk snvm cldnp fckczmjr cgbbdm gmlws fzxgsrv gbtjpc jkxhqq mmjjnm hgncbbjh xgws twz zlpjk twhhp dbjqgbsz jslwxgjj xwcwkhq crt chcfdj mfkvgms hlvmrnpm mkg wzgctbnl szk xxzdbwk jhrhv gzwgxmj lnkqmcb ztwtmwl gfrdzf bflrklbq qlcgcxzf tqcglfb tzhhm fqwv lcl nwxdpwvd vgbgpjth dlhzbwqz pntrwc rrpfjck tgbf hhxqdzx qptb nxvfgxn fhdsvjh twmbx dhvz ktmhkx ckhwjfsg jhvfwf jqgb rxgpkh kvc pjngm fbmgck qhbqslp klvslp xqqp tcgtxw nzkvk rhngpzt gbpckhbc ldths khcpkl jzhs zwhhrrd txh mbng dqdf tndsshj jxvxxw qcvqgz xwkknr qvb vvpb ntmbc pjcxr klrqzsdc cvsch kkscv fxmq nxf zfdwv jjdxk lcxcftm qvcpdh sbjbp hltpv btkkls dknspp xvdfcslp hqlxsmzw mdbvdjks nbjc grplsh ngrqxb zgvz fzxqv cslq bdf gnn dsx tzcm lgrb fjzcjgt qjkfs vszqglqq hjq xwwtbh kvbwcw nbm vll ksv qfln qqhx gfjffg bttz lpl fvttnv whrrvv tqznjxw pjpv krdjjdd rdrtf vww zslbzz dghkxgn fllhsgpb pqzkmwzf djn sxfhcjp pjk vrghmnnb jpwbvnmr ctlnv lfcfh tbkbhkj dtg fkt dqgwfcjw dhxf lcn xmcddbn whqs zxtfnll wdn pgqhcgc wdqr jwjjsndt wsfzsjtw bwkq dwq qqwpppfq bffcbxp gzzvncct lzjftjl vltqgfvd gxdgrqlc bdp cfhxcg bqv bqfmjbz dlhwpkg sfsgt npg gwfd ngp vjd gxqvvk bxqdfmc sxdcq fjxvwfqc zbtns nbvmv bjn tjfglj fgz jkxw qqlr gms mpntrzt dzxjcp phczb tppgq nxrs twpzb hlnf cdh ppvr czmrsfk kwzrmld kjcxrgz mffgf wdczjl hmkrdc mslz dcvgtdxb jjlc pxscnhc fkfchpvm mwrqh flg bnkkpfpf bcfrs swkwk hpqk vnkjbl mszwfkw kccl sbqrzrrg vqqlvpxr dgmg qrlx sgnjl fwlxrl jkc zrmh kls dfjp pvmlbnnf wxnzwrkl scxp ldfqkpz flmnzn lsxpds bfgdsft cbs zxn zgs mpds cgkrn wbmh ztwgjrwg dcvvtqd mgsjdsv mrvkjdr nxztbqdk fwhhbp hzvvt mmrvcn fcnjkzf sccfq rxngmrv qpmlpbcz kgbx htp fjbvx fzbqfvw bdvvvwcz xdhdkx bsbzz wqpfzj dgqsrfml qccxb dxlcjtql lnh zdm vfbn jcjnphr zmwxqhj tvb cqpprm zkhfqnlw zppxnjql qjfhmh dvfswgpw sqjtlpgd zgvmbbs jtdl lzrrgdf mqjhshs dhz vcjhrxxk wmgtm rmvzbx qdbzm wpwvqhqg jstcv gdckm nspfs pprsft rwz ltkpxt gmgzdx brgswx vtgqxbwz hqrwq fphv lmzzqk bstfdcgx cksqhgnx swg vmtf pxwtzf vnsppv hsfj zvvfkz nnqf vzckfjhx ksxxsw ksbbvw vxxsfj zzcgdl rczp zcszw zgtqxrz nhnmlkk cbhkhv brq mwvxbg vsfwrmk hwsnlh wsntdfw jdrj ghw xhh dsclq hphgxtbr qfrzjb mmj ckttxjzw kppq jbx tjbtkwp pwmb gbvdx kzdq bgmlbht xpn kzktrvzg tznkx vlnvm bhrnlp blbxrqzj xzmnwb qcwrv lgvwlp hvjrpqjl hbdqsbl cdlss rvlwpbb xdgxft ctkhk kzzvplf nhtspn hbqz crntslnh wfs krtzx fwtngzq bsdjnhz crk vvdldzw lzvfrbkp wsf kpbnbws htfx rmvgjxtv sbc hzlcgwgb zfqvbw cjt sxbhfmz bxp xdbnb xhrtwbxr kdj wdcp zcg hjq pqckzf qxb wrnh rjprjpt xlghbtmj slm bcvhcb hmmwsnk xqqgtmn vcrzwgn kssz kszcqm dddwp rnpcdk sbdldxb jmmsm flvvqw zdp jzt zdvrwkz trhm lhrs hgsc gvb cht gjhxqf mrlqtwwr vdc fmmtkb brzkgvwg zsmstwk dpbkjglj ntj msjdjwxk ckwpnskt vrnwl jgzlmml tjphzphw zwh rstnhrb xfgxjvts vfmcgq jkdtx hkkcvns qxbjnqzn whjpz bxlzqzb hdtsb kpsfjvmp bvkqw zwtskvw gqrk jkpcq mqsgqvg qbpl gwd cqfqf rsfpp jhzvkwm wscbg mbfd brfl fvd wfbgktm ltll svzs zgqhvhqp cvm dlvrwms dfwxhwpq wggrxsgv jkqldq lhc fpzzfs btxkcdgg lvqhvlv pxh ztwcfq pkkqz tfgr rgjbnrnc ncm zcddhx tgbgsgkk dkw vdh wrtpzj ktmh mcsdj gmbjbg lnjnk sxw ltsdw dhms hbsf nrwbhq xjpkpgxt flzq gpch rsr kdkc hwlfxmg xlrqjnfh thdwkrmf wklqzbv hbp dbgkqjmm hlrkwf llrlwkdl rvvvrk zptzwfh mtl xbxdn dnqh vssnlv rhggsk gdwwv nrw hmptcqlv xnwzv tvwkwb qbkr zknspwl xtwjmqwv kjgmtxvs vznm brxb xhpwf ljnfwmt glsl hfrcwxxb fgt vqlqn njqc dxw nxlmhgk pjm cmw qhlww snvmdz zdqkv fdwsd wqd zctbl sqtsvhzx kfmgz brsjxrx bkfbjpf szfxh pglxhxp qmbvtrcd fxghv';

 $foo = ['r', 't', 'c', 'd', 'b'];
 $preposicoes = 0;
 foreach(explode(' ', $textB) as $key => $word)
 {
    if( (strlen($word) === 5 ) && (false === strpos($word, 'l')) && (!in_array($word[4], $foo)))
    {
        $preposicoes++;
    }
 }
 echo "<b>Resposta:</b> Existem $preposicoes preposições no Texto B.<br>";

 /*
 * Um outro fato interessante descoberto pelos linguistas é que, no Booglan, os verbos sempre são palavras de 8 ou mais
 * letras que terminam numa letra tipo bar. Além disso, se um verbo começa com uma letra tipo bar, o verbo está em
 * primeira pessoa.
 * Assim, lendo o Texto A, é possível identificar 71 verbos no texto, dos quais 58 estão em primeira pessoa.
 * Já no Texto B, quantos são os verbos?
 * E quantos verbos do Texto B estão em primeira pessoa?
 */
 $verbs = 0;
 $verbsFirstPerson = 0;
 foreach(explode(' ', $textB) as $key => $word)
 {
    if( (strlen($word) >= 8) && (!in_array($word[(strlen($word)-1)], $foo)))
    {
        if(!in_array($word[0], $foo))
        {
            $verbsFirstPerson++;
        }
       $verbs++;
    }
}
echo "<b>Resposta:</b> Há $verbs verbos no Texto B.<br>";
echo "<b>Resposta:</b> Há $verbsFirstPerson verbos em primeira pessoa no Texto B.<br>";

/*
* Um professor universitário utilizará os textos A e B para ensinar o Booglan aos alunos.
* Para ajudar os alunos a compreender o texto, esse professor precisa criar uma lista de vocabulário para cada texto,
* isto é, uma lista ordenada (e sem repetições) das palavras que aparecem em cada um dos textos.

* Essas listas devem estar ordenadas e não podem conter repetições de palavras. No Booglan, assim como no nosso alfabeto,
* as palavras são ordenadas lexicograficamente, mas o problema é que no Booglan, a ordem das letras no alfabeto é
* diferente da nossa. O alfabeto Booglan, em ordem, é: twhzkdfvcjxlrnqmgpsb. Assim, ao fazer essas listas, o professor
* deve respeitar a ordem alfabética Booglan.
*/

function orderBooglan($word1, $word2)
{
    $i = 0;
    do{
        if(!isset($word1[$i]))
            return -1;
        if(!isset($word2[$i]))
            return 1;
        $letra1 = $word1[$i];
        $letra2 = $word2[$i];

        $order = orderLetter($letra1, $letra2);
        $i++;
    } while ($order == 0);

    return $order;
}

function orderLetter($letra1, $letra2)
{
    if($letra1 == $letra2)
        return 0;

    $alphabet='twhzkdfvcjxlrnqmgpsb';

    $pos1 = strpos($alphabet, $letra1);
    $pos2 = strpos($alphabet, $letra2);

    return $pos1 < $pos2 ? -1 : 1;
}
$arrayTextB = array_unique(explode(' ', $textB));
usort($arrayTextB, "orderBooglan");
echo "<b>Como seria a lista de vocabulário do Texto B?</b><br>" . wordwrap(implode(' ', $arrayTextB));

/*
* Mas como os Booglans escrevem números? Bem, no Booglan, as palavras também são números dados em base 20, onde cada
* letra é um dígito, e os dígitos são ordenados do menos significativo para o mais significativo (o inverso do nosso
* sistema). Ou seja, a primeira posição é a unidade, a segunda posição vale 20, a terceira vale 400, e assim por diante.
* Os valores das letras são dados pela ordem em que elas aparecem no alfabeto Booglan (que é diferente da nossa ordem,
* como vimos acima). Ou seja, a primeira letra do alfabeto Booglan representa o dígito 0, a segunda representa o
* dígito 1, e assim por diante.

* Por exemplo, a palavra hnh tem o valor numérico de 1062.
*
* OBS: os números nesse problema podem ser grandes, então se você está usando um tipo de dados de tamanho limitado,
* tenha cuidado com possíveis overflows.

* Os Booglans consideram um número bonito se ele satizfaz essas duas propriedades:

* é maior ou igual a 422224
* é divisível por 3
* Ao consideramos o Texto A como uma lista de números (isto é, interpretando cada palavra como um número usando a
* convenção explicada acima), notamos que existem 140 números bonitos distintos.

* E no Texto B, quantos números bonitos distintos existem?
*/
$alphabet='twhzkdfvcjxlrnqmgpsb';
//$textA="rvtfn";
$arrayTextB = array_unique(explode(' ', $textA));
$prettyDistinctNumber=0;

function fatoracao($fatora, $indice)
{
    $fatorado = 1;
    for($i=1;$i<$indice;$i++)
    {
        $fatorado *= 20;
    }
    return ($fatorado * $fatora);
}

foreach($arrayTextB as $key => $word)
{
    $i=1;
    $sumPrettyNumber=0;    
    do
    {
        if($i == 1)
        {
            $sumPrettyNumber += strpos($alphabet, $word[$i-1]);
        }
        else
        {
            $pos = strpos($alphabet, $word[$i-1]);
            $sumPrettyNumber += $fat = fatoracao($pos, $i);
        }     
        // echo  "<br> pos: $pos fat: $fat";
        // echo  "<br> $sumPrettyNumber";
        $i++;
    }
    while($i <= strlen($word));

    if(($sumPrettyNumber >= 422224) && (($sumPrettyNumber % 3) === 0))
    {
        $prettyDistinctNumber++;
    }
    // echo  "<br> $word : $sumPrettyNumber";
    // echo  "<br> $prettyDistinctNumber";

}
echo  "<br> <b>Resposta:</b> No Texto B, há $prettyDistinctNumber números bonitos distintos (atenção!).";
//echo  "<br> $sumPrettyNumber";